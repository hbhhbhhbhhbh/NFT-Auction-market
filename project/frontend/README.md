# NFT 市场前端应用

这是 COMP5521 NFT 市场项目的前端应用，使用 React + Vite + Ethers.js 构建。

## 功能特性

### 1. 稳定币管理
- 查看 MPGA 代币余额
- 授权市场合约使用代币
- 支持指定金额授权和无限授权

### 2. NFT 收藏品
- 铸造新的 NFT
- 查看拥有的 NFT 列表
- 显示 NFT 元数据和图片

### 3. 直接销售市场
- 上架 NFT 进行销售
- 浏览和购买上架的 NFT
- 取消自己的上架

### 4. 密封投标暗拍
- 发起暗拍
- 提交哈希出价（投标阶段）
- 揭示出价（揭示阶段）
- 结算拍卖
- 提取退款

## 安装和运行

### 前置要求
- Node.js 16+ 
- npm 或 yarn
- MetaMask 或其他 Web3 钱包

### 安装依赖

```bash
cd frontend
npm install
```

### 配置合约地址

在 `src/config/contracts.js` 中更新合约地址：

```javascript
export const CONTRACT_ADDRESSES = {
  stablecoin: "你的稳定币合约地址",
  nft: "你的NFT合约地址",
  marketplace: "你的市场合约地址"
};
```

### 运行开发服务器

```bash
npm run dev
```

应用将在 http://localhost:3000 启动

### 构建生产版本

```bash
npm run build
```

## 使用说明

### 1. 连接钱包
- 点击右上角"连接钱包"按钮
- 在 MetaMask 中确认连接

### 2. 稳定币授权
- 进入"稳定币"页面
- 输入授权金额或点击"无限授权"
- 确认交易

### 3. 铸造 NFT
- 进入"NFT"页面
- 输入接收地址和 Token URI
- 点击"铸造 NFT"

### 4. 上架 NFT
- 进入"市场"页面
- 输入 Token ID 和价格
- 点击"上架"
- 首次上架需要先授权市场合约

### 5. 购买 NFT
- 在"市场"页面找到要购买的 NFT
- 输入 NFT 合约地址和 Token ID
- 点击"购买"
- 确保已授权足够的代币

### 6. 参与暗拍

#### 发起拍卖
- 进入"暗拍"页面
- 输入 Token ID、投标时间和揭示时间
- 点击"发起"

#### 提交投标
- 输入 NFT 合约地址和 Token ID
- 输入出价和押金（押金必须 ≥ 出价）
- 生成或输入密钥 nonce
- **重要：保存您的出价和 nonce，揭示阶段需要**
- 点击"提交投标"

#### 揭示投标
- 在揭示阶段，输入之前保存的出价和 nonce
- 点击"揭示投标"

#### 结算拍卖
- 揭示阶段结束后，任何人都可以结算拍卖
- 输入 NFT 合约地址和 Token ID
- 点击"结算拍卖"

#### 提取退款
- 未中标者可以提取押金退款
- 输入 NFT 合约地址和 Token ID
- 点击"提取退款"

## 技术栈

- **React 18** - UI 框架
- **Vite** - 构建工具
- **Ethers.js 6** - 以太坊交互
- **React Router** - 路由管理
- **Tailwind CSS** - 样式框架
- **Lucide React** - 图标库

## 注意事项

1. **合约地址配置**：部署合约后，务必更新 `src/config/contracts.js` 中的地址
2. **网络配置**：确保 MetaMask 连接到正确的网络（本地开发网络或测试网）
3. **Gas 费用**：所有交易都需要支付 Gas 费用
4. **暗拍安全**：参与暗拍时，务必妥善保存出价和 nonce，丢失将无法揭示投标
5. **事件监听**：当前版本的上架和拍卖列表功能需要完善事件监听机制，实际应用中应该通过事件日志来获取所有数据

## 开发建议

1. 使用 Hardhat 的本地网络进行测试
2. 部署合约后，从 artifacts 目录导入完整的 ABI
3. 实现事件监听来实时更新上架和拍卖列表
4. 添加更多的错误处理和用户提示
5. 实现 NFT 元数据的 IPFS 存储

## 许可证

MIT











